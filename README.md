Trade Reporting Project
===================

The main goal of project is given a number of instructions to generate:

- **Daily reports** with total amount of instructions for each date for both incoming and outgoing.
- **Ranking reports** for both incoming and outgoing, defining the entity with maximum single instruction amount.

### Instruction Examples

| Entity     | Buy/Sell | AgreedFx   | Currency | Instruction Date | Settlement Date | Units | Price per Unit
| :------- | :---: | :---: | :---: | :---: | :---: | :---: | :---:
| foo | B |  0.50    | SGP | 01 Jan 2016 | 01 Jan 2016 | 200 | 100.25
| bar | S |  0.22    | AED | 05 Jan 2016 | 07 Jan 2016 | 450 | 150.5

### Requirements

1. **Settlement date** can only be a working day. Otherwise update it to the next working day.
2. **Working week** is Monday to Friday apart from AED and SAR which is Sunday to Thursday.
3. **USD amount of trade** is the multiplication of units * agreed fx * price per unit

### Design Assumptions

1. The **instructions** are supposed to be **non ideal**, so, the software is designed to handle non valid data as well.
2. The parser will validate all the data, so, it is guaranteed  that **reports will handle validated data** and there is no need for unnecessary null checks.
3. The input is supposed to be as described in the project overview and any **further fields** such as date and enumeration fields are **generated by the software**.
4. **Ranking reports** examine the amount of a **single instruction value** and not adding all the values for each entity for outgoing and incoming respectively. For example, if an entity for a single incoming instruction has the maximum amount of all the incoming instructions, then this entity is rank 1. It is easily extended to rank with the total amount for all instructions by entity, by simple storing or summing up all the instructions per entity per buy or sell.
5. **Daily reports** by purpose **display all the intermediate dates** within the examined window even if the amount is zero. This was preferred for more user friendly read i.e. see the whole week.
6. The design is **optimized for the requested reports**, however, it is designed to be **scalable** and easily extend to prepare more reports, such as invalid instructions alongside with reason.

### Design Overview

Initially, there is a generic fetcher implementation for fetching instructions requested by clients, and for demonstration purposes, there is a random instructions generator. After retrieval, the data are passed to the instructions parser, where they are validated and supplemental fields are generated for every instruction. Moreover, assistant variables for reporting are generated. Finally, report generation is take place with validated data. 

```flow
st=>start: Start
e=>end
op_retrieval=>operation: Instructions Retrieval
op_parser=>operation: Instructions Parser
op_daily_reports=>operation: Daily Reports B/S
op_rank_reports=>operation: Rank Reports B/S

st->op_retrieval->op_parser->op_daily_reports->op_rank_reports->e
```

The implementation is following the Test Driven Development (TDD) principles, using unit testing for every crucial component and by examining all involved entities for proper behavior, for both valid and invalid inputs.

A sequence description can be found to diagram: **sequence.gif**

### Source Code Overview

The source code structure and implementation are follow the general guidelines of clean architecture, where in more detail, the packages describe:

- **models**: POJOs describing the data layer
- **enums**: Enumeration fields
- **interfaces**: Interfaces
- **controllers**: Business logic goes here
- **common**: General utilities

The Java 8 was used and an overview description can be found to diagram: **overview.gif**

### Installation and Run

The whole project is developed using the well established Maven build tool. In order to verify it and run all the tests you can simple run:

```
mvn install
```

In order to run only the unit test suite (developed using the JUnit 4 framework), you can run:

```
mvn test
```

If you want to run the program, you can do it by running:

```
mvn exec:java
```

which automatically runs the main existing in **TradeReporting.java** as it is configured in the pom file. In main function you can configure the following parameters for the random instructions generator:

- **Number of Instructions**: the total number instructions
- **Number of unique entities**: the number of unique entities for the instructions
- **Date Start**: the starting date
- **Date End**: the end date

### License

Copyright 2017 Panagiotis Vasileiou

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.